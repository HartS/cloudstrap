#+TITLE: Stackato LKG Bootstrap Agent
#+LATEX: \pagebreak

* Overview

=stackato-lkg= is a tool to automate the setup of a Stackato Cluster from =Last
Known Good= artifacts.

* Why does this exist?

To simplify deployments.

* Installation

#+BEGIN_SRC shell
  gem install --pre stackato-lkg
#+END_SRC

* Usage

Simply run the automated bootstrap tool. You can configure it via ENV or =config.yaml=

#+BEGIN_SRC shell
  stackato-lkg
#+END_SRC

The output describes the results, and all settings used in the process.

#+BEGIN_EXAMPLE
  # Stackato LKG Automated Bootstrap v0.21.0.pre

  # General Configuration
  #   These settings can be configured via ENV or config.yaml

  BOOTSTRAP_REGION=us-west-2
  BOOTSTRAP_CACHE_PATH=/Users/colstrom/stackato-lkg/.cache
  BOOTSTRAP_VPC_CIDR_BLOCK=10.0.0.0/16
  BOOTSTRAP_PUBLIC_CIDR_BLOCK=10.0.0.0/24
  BOOTSTRAP_PRIVATE_CIDR_BLOCK=10.0.1.0/24
  BOOTSTRAP_AMI_OWNER=099720109477
  BOOTSTRAP_UBUNTU_RELEASE=14.04
  BOOTSTRAP_INSTANCE_TYPE=t2.micro
  BOOTSTRAP_SSH_DIR=/Users/colstrom/stackato-lkg/.ssh
  BOOTSTRAP_SSH_USERNAME=ubuntu
  BOOTSTRAP_HDP_DIR=/Users/colstrom/stackato-lkg

  # Cached Configuration
  #   These settings can be overridden via ENV only

  BOOTSTRAP_USERNAME=colstrom
  BOOTSTRAP_UUID=97cb1464-cf44-479e-be47-9a212131ad4c
  BOOTSTRAP_TAG=lkg@colstrom/97cb1464-cf44-479e-be47-9a212131ad4c
  BOOTSTRAP_AMI=ami-70b67d10
  BOOTSTRAP_VPC_ID=vpc-0e93a16a
  BOOTSTRAP_INTERNET_GATEWAY_ID=igw-942af8f0
  BOOTSTRAP_JUMPBOX_SECURITY_GROUP=sg-43f9183a
  BOOTSTRAP_PRIVATE_SUBNET_ID=subnet-b7047dc1
  BOOTSTRAP_PUBLIC_SUBNET_ID=subnet-9c1c65ea
  BOOTSTRAP_ROUTE_TABLE_ID=rtb-9d28dcfa
  BOOTSTRAP_AVAILABILITY_ZONE=us-west-2b
  BOOTSTRAP_JUMPBOX_ID=i-051c248563a2c3f54
  BOOTSTRAP.JUMPBOX_IP=52.89.237.123

  # Additional Information
  #   These do not need configuration, and are presented as a debugging checklist

  # Public IPs Enabled in Public Subnet? true
  # Gateway Attached to VPC? true
  # Route to Internet via Gateway? true
  # SSH Allowed to Jumpbox? true
  # SSH Key uploaded to AWS? 1a:c4:ec:25:94:90:ed:ee:c2:66:2e:3c:9c:c8:7a:12
  # HDP bootstrap.properties configured? true
  # Jumpbox Running? true

    INFO [7217c486] Running /usr/bin/env chmod +w /home/ubuntu/.ssh/id_rsa as ubuntu@52.89.237.123
    INFO [7217c486] Finished in 0.563 seconds with exit status 0 (successful).
    INFO Uploading /Users/colstrom/stackato-lkg/.ssh/lkg@colstrom/97cb1464-cf44-479e-be47-9a212131ad4c 100.0%
    INFO [516c80c4] Running /usr/bin/env chmod -w /home/ubuntu/.ssh/id_rsa as ubuntu@52.89.237.123
    INFO [516c80c4] Finished in 0.030 seconds with exit status 0 (successful).
    INFO Uploading /Users/colstrom/stackato-lkg/bootstrap.properties 100.0%
    INFO [1aefb41d] Running /usr/bin/env apt install --assume-yes genisoimage as ubuntu@52.89.237.123
    INFO [1aefb41d] Finished in 0.268 seconds with exit status 0 (successful).
#+END_EXAMPLE

* License

  =stackato-lkg= is available under the [[https://tldrlegal.com/license/mit-license][MIT License]]. See ~LICENSE.txt~ for the
  full text. Stackato has its own license. This tool just deploys it.

* Contributors

  - [[https://colstrom.github.io/][Chris Olstrom]] | [[mailto:chris@olstrom.com][e-mail]] | [[https://twitter.com/ChrisOlstrom][Twitter]]
